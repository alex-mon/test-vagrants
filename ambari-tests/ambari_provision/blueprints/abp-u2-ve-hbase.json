{
  "Blueprints": {
    "blueprint_name" : "abp-u2-ve-hbase",
    "stack_name" : "HDP",
    "stack_version" : "2.3"
  },
  "host_groups": [
    {
      "name" : "hostgroup_admin_ambari_master",
      "cardinality" : "1",
      "components" : [
        { "name" : "AMBARI_SERVER" },
        { "name" : "METRICS_COLLECTOR" },
        { "name" : "METRICS_MONITOR" }
      ]
    },
    {
      "name" : "hostgroup_hbase_hadoop_master_1",
      "cardinality" : "1",
      "components" : [
        { "name" : "NAMENODE" },
        { "name" : "ZKFC" },
        { "name" : "JOURNALNODE"},
        { "name" : "HBASE_MASTER" },
        { "name" : "METRICS_MONITOR" }
      ]
    },
    {
      "name" : "hostgroup_hbase_hadoop_master_2",
      "cardinality" : "1",
      "components" : [
        { "name" : "NAMENODE" },
        { "name" : "ZKFC" },
        { "name" : "JOURNALNODE"},
        { "name" : "HBASE_MASTER" },
        { "name" : "METRICS_MONITOR" }
      ]
    },
    {
      "name" : "hostgroup_hbase_hadoop_master_3",
      "cardinality" : "1",
      "components" : [
        { "name" : "JOURNALNODE"},
        { "name" : "RESOURCEMANAGER" },
        { "name" : "APP_TIMELINE_SERVER" },
        { "name" : "HISTORYSERVER" },
        { "name" : "METRICS_MONITOR" }
      ]
    },
    {
      "name" : "hostgroup_hbase_hadoop_datanode",
      "cardinality" : "4",
      "components" : [
        { "name" : "NODEMANAGER" },
        { "name" : "DATANODE" },
        { "name" : "HBASE_REGIONSERVER" },
        { "name" : "METRICS_MONITOR" }
      ]
    }
  ],
  "configurations": [
    {
      "core-site" : {
        "properties_attributes" : { },
        "properties" : {
          "fs.defaultFS" : "hdfs://ve-hbase",
          "ha.zookeeper.quorum" : "%HOSTGROUP::hostgroup_coordination_zookeeper%:2181"
        } }
    },
    {
      "hdfs-site" : {
        "properties_attributes" : { },
        "properties" : {
          "dfs.client.failover.proxy.provider.ve-hbase" : "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider",
          "dfs.ha.automatic-failover.enabled" : "true",
          "dfs.ha.fencing.methods" : "shell(/bin/true)",
          "dfs.ha.namenodes.ve-hbase" : "nn1,nn2",
          "dfs.namenode.http-address" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_1%:50070",
          "dfs.namenode.http-address.ve-hbase.nn1" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_1%:50070",
          "dfs.namenode.http-address.ve-hbase.nn2" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_2%:50070",
          "dfs.namenode.https-address" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_1%:50470",
          "dfs.namenode.https-address.ve-hbase.nn1" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_1%:50470",
          "dfs.namenode.https-address.ve-hbase.nn2" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_2%:50470",
          "dfs.namenode.rpc-address.ve-hbase.nn1" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_1%:8020",
          "dfs.namenode.rpc-address.ve-hbase.nn2" : "%HOSTGROUP::hostgroup_hbase_hadoop_master_2%:8020",
          "dfs.namenode.shared.edits.dir" : "qjournal://%HOSTGROUP::hostgroup_hbase_hadoop_master_1%:8485;%HOSTGROUP::hostgroup_hbase_hadoop_master_2%:8485;%HOSTGROUP::hostgroup_hbase_hadoop_master_3%:8485/ve-hbase",
          "dfs.nameservices" : "ve-hbase"
        } }
    },
    {
      "hbase-site": {
        "properties_attributes": {},
        "properties": {
          "hbase.zookeeper.quorum": "%HOSTGROUP::hostgroup_coordination_zookeeper%:2181",
          "hadoop.registry.zk.quorum": "%HOSTGROUP::hostgroup_coordination_zookeeper%:2181",
          "hbase.rootdir" : "hdfs://ve-hbase:8020/apps/hbase/data"
        }
      }
    },
    {
      "hbase-env":{
        "properties-attributes": { },
        "properties": {
            "phoenix_sql_enabled" : "true"
        }
      }

    },
    {
      "yarn-site":{
        "properties_attributes": { },
        "properties": {
          "yarn.resourcemanager.zk-address": "%HOSTGROUP::hostgroup_coordination_zookeeper%:2181"
        }
      }
    }
  ]
}
